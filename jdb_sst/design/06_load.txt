6. 加载流程 (Load Flow)

6.1 加载步骤

async fn load(path: &Path, id: u64) -> Result<SstFile>

1. read_write(path) 打开文件
2. file.metadata().len() 获取文件大小
3. read_at(file_size - Foot::SIZE) 读取 Foot
4. 验证 Foot.version 和 checksum
5. 根据 Foot 计算 filter/index 位置:
   - filter_start = Foot.filter_offset
   - index_start = filter_start + Foot.filter_size
6. 一次性读取 filter + index 数据
7. 解压 (if needed) 并 bitcode::decode
8. 构建 SstFile 返回


6.2 校验和验证

checksum 覆盖: filter_data + index_data + foot (除 checksum 字段)

let mut hasher = crc32fast::Hasher::new();
hasher.update(&filter_data);
hasher.update(&index_data);
hasher.update(&foot_bytes[..Foot::SIZE - 4]);
let checksum = hasher.finalize();


6.3 获取 min/max key

- min_key: first_keys[0]
- max_key: 需要读取最后一个 block，解析出最后一个 key
  (或者在 Foot 中额外存储 max_key，但会增加 Foot 大小)
